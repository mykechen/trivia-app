let sportsQuestions = [
  {
    question: "Which former NBA player is on the NBA logo?",
    choiceA: "Jerry West",
    choiceB: "Michael Jordan",
    choiceC: "Bill Walton",
    choiceD: "Wilt Chamberlain",
    correct: "A"
  },
  {
    question: "Who invented Basketball?",
    choiceA: "John Piper",
    choiceB: "James Naismith",
    choiceC: "Larry Bernards",
    choiceD: "Josh Rosell",
    correct: "B"
  },
  {
    question: "What was the most points scored in a single NBA game?",
    choiceA: "81",
    choiceB: "65",
    choiceC: "100",
    choiceD: "101",
    correct: "C"
  },
  {
    question: "Which NBA player won the most championships?",
    choiceA: "Bill Russell",
    choiceB: "Michael Jordan",
    choiceC: "Lebron James",
    choiceD: "Kareem Abdul-Jabbar",
    correct: "A"
  },
  {
    question: "Who won the soccer World Cup in 2018?",
    choiceA: "France",
    choiceB: "Croatia",
    choiceC: "Spain",
    choiceD: "Brazil",
    correct: "A"
  },
  {
    question: "Who was the highest-paid soccer player ever?",
    choiceA: "Luis Suarez",
    choiceB: "Cristiano Ronaldo",
    choiceC: "Neymar Jr",
    choiceD: "Lionel Messi",
    correct: "D"
  },
  {
    question: "Who is the richest athelte ever?",
    choiceA: "Vince McMahon",
    choiceB: "Tiger Woods",
    choiceC: "Michael Jordan",
    choiceD: "David Beckham",
    correct: "A"
  },
  {
    question:
      "Which football team won the very first Super Bowl that was played on Jan 15, 1967?",
    choiceA: "New York Jets",
    choiceB: "Kansas City Chiefs",
    choiceC: "Green Bay Packers",
    choiceD: "Oakland Raiders",
    correct: "C"
  },
  {
    question: "Which baseball player is on the MLB logo?",
    choiceA: "Babe Ruth",
    choiceB: "Cap Ripken",
    choiceC: "Harmon Killebrew",
    choiceD: "Hank Aaron",
    correct: "C"
  },
  {
    question: "Which NFL team won the most Super Bowls?",
    choiceA: "Denver Broncos",
    choiceB: "New York Giants",
    choiceC: "Dallas Cowboys",
    choiceD: "Pittsburgh Steelers",
    correct: "D"
  },
  {
    question:
      "Which boxer holds the record for the longest reign as World Heavyweight Champion?",
    choiceA: "Jack Johnson",
    choiceB: "Joe Louis",
    choiceC: "Rocky Marciano",
    choiceD: "Jack Dempsey",
    correct: "B"
  },
  {
    question: "How many Olympic medals has Michael Phelps won in his career?",
    choiceA: "24",
    choiceB: "20",
    choiceC: "32",
    choiceD: "28",
    correct: "D"
  },
  {
    question: "Who is known as the fastest man alive?",
    choiceA: "Usain Bolt",
    choiceB: "Flash",
    choiceC: "Carl Lewis",
    choiceD: "Tyreek Hill",
    correct: "A"
  },
  {
    question: "What is the only number retired by the entire NHL?",
    choiceA: "1",
    choiceB: "30",
    choiceC: "99",
    choiceD: "66",
    correct: "C"
  },
  {
    question:
      "Which baseball player holds the record for the most consecutive games played?",
    choiceA: "Stan Musial",
    choiceB: "Cal Ripken Jr.",
    choiceC: "Pete Rose",
    choiceD: "Lou Gehrig",
    correct: "B"
  },
  {
    question:
      "Which of these teams has never won a championship in the NBA (2020)?",
    choiceA: "New York Knicks",
    choiceB: "Milwaukee Bucks",
    choiceC: "Indiana Pacers",
    choiceD: "Dallas Mavericks",
    correct: "C"
  },
  {
    question:
      "Which legendary head coach is the Super Bowl Trophy named after?",
    choiceA: "Tim Landry",
    choiceB: "Don Shula",
    choiceC: "Paul Brown",
    choiceD: "Vince Lombardi",
    correct: "D"
  },
  {
    question:
      "The 1992 US Mens Olympic Basketball Team was given what nickname?",
    choiceA: "Dream Team",
    choiceB: "Super Team",
    choiceC: "Legends",
    choiceD: "All Star Team",
    correct: "A"
  },
  {
    question: "How many periods are there in a hockey game?",
    choiceA: "3",
    choiceB: "2",
    choiceC: "1",
    choiceD: "4",
    correct: "A"
  },
  {
    question: "Which country has won the most Rugby Union World Cups?",
    choiceA: "New Zealand",
    choiceB: "England",
    choiceC: "Australia",
    choiceD: "France",
    correct: "A"
  }
];

let videogameQuestions = [
  {
    question: "'V-bucks' are the in-game currency for which famous videogame?",
    choiceA: "Fortnite",
    choiceB: "Destiny",
    choiceC: "Halo",
    choiceD: "Counter Strike: Global Offensive",
    correct: "A"
  },
  {
    question: "Which year was Minecraft released?",
    choiceA: "2011",
    choiceB: "2009",
    choiceC: "2008",
    choiceD: "20010",
    correct: "B"
  },
  {
    question: "Which year was the PS4 released?",
    choiceA: "2014",
    choiceB: "2015",
    choiceC: "2012",
    choiceD: "2013",
    correct: "D"
  },
  {
    question: "Which character is Mario always trying to save?",
    choiceA: "Browser",
    choiceB: "Peach",
    choiceC: "Luigi",
    choiceD: "Donkey Kong",
    correct: "B"
  },
  {
    question: "How many Pokemon are there in the Gen 1 Pokedex",
    choiceA: "151",
    choiceB: "160",
    choiceC: "155",
    choiceD: "100",
    correct: "A"
  },
  {
    question: "What is the sniper called in Counter Strike Global Offensive?",
    choiceA: "AWP",
    choiceB: "Ak47",
    choiceC: "M4",
    choiceD: "SG553",
    correct: "A"
  },
  {
    question: "What is the name of the male default skin in Minecraft",
    choiceA: "Vick",
    choiceB: "Notch",
    choiceC: "Steve",
    choiceD: "Alex",
    correct: "C"
  },
  {
    question: "What is the most used application for video games",
    choiceA: "Steam",
    choiceB: "Minecraft Launcher",
    choiceC: "Epic Games",
    choiceD: "Google Chrome",
    correct: "A"
  },
  {
    question: "Which character is the most popular in Overwatch?",
    choiceA: "Doomfist",
    choiceB: "Genji",
    choiceC: "Tracer",
    choiceD: "Hanzo",
    correct: "C"
  },
  {
    question: "Which game was the first to feature battle royale mode?",
    choiceA: "PUBG",
    choiceB: "Fortnite",
    choiceC: "H1Z1",
    choiceD: "Apex Legends",
    correct: "C"
  },
  {
    question: "What was the first videogame ever created?",
    choiceA: "Pong",
    choiceB: "Space Invaders",
    choiceC: "Pac Man",
    choiceD: "Tetris",
    correct: "A"
  },
  {
    question: "What is the most played videogame ever?",
    choiceA: "Crossfire",
    choiceB: "Fortnite",
    choiceC: "Minecraft",
    choiceD: "Pacman",
    correct: "A"
  },
  {
    question: "How many Call of Duty games are there as of 2020",
    choiceA: "15",
    choiceB: "16",
    choiceC: "10",
    choiceD: "12",
    correct: "B"
  },
  {
    question: "Which company created Clash of Clans?",
    choiceA: "Supercell",
    choiceB: "Clash Royale Corp",
    choiceC: "Tencent",
    choiceD: "Kongregate",
    correct: "A"
  },
  {
    question: "What is the best-selling video game of all time as of 2020?",
    choiceA: "Minecraft",
    choiceB: "Tetris",
    choiceC: "Grand Theft Auto V",
    choiceD: "Wii Sports",
    correct: "A"
  },
  {
    question: "What is the best-selling game console of all time as of 2020?",
    choiceA: "Game boy",
    choiceB: "Wii",
    choiceC: "Nintendo DS",
    choiceD: "Playstation 2",
    correct: "D"
  },
  {
    question: "What was Mario's original name?",
    choiceA: "Redman",
    choiceB: "Jumpman",
    choiceC: "Wario",
    choiceD: "Peach",
    correct: "B"
  },
  {
    question: "Who is on the cover of FIFA 18?",
    choiceA: "Lionel Messi",
    choiceB: "Luis Suarez",
    choiceC: "Cristiano Ronaldo",
    choiceD: "Neymar Jr",
    correct: "C"
  },
  {
    question: "What was the first videogame on the Nintendo Switch?",
    choiceA: "Legend of Zelda: Breath of the Wild",
    choiceB: "Super Smash Bros. Ultimate",
    choiceC: "Super Mario Odyssey",
    choiceD: "Splatoon 2",
    correct: "A"
  },
  {
    question: "How many main series Pokemon games are there",
    choiceA: "18",
    choiceB: "20",
    choiceC: "8",
    choiceD: "12",
    correct: "A"
  }
];

let generalQuestions = [
  {
    question: "How many rings are on the Olympic Flag?",
    choiceA: "4",
    choiceB: "5",
    choiceC: "7",
    choiceD: "6",
    correct: "B"
  },
  {
    question: "How did Spider-Man get his powers?",
    choiceA: "Bitten by a radioactive spider",
    choiceB: "Born with them",
    choiceC: "Woke up with them after a strange dream",
    choiceD: "Military experiment gone awry",
    correct: "A"
  },
  {
    question: "Which of these animals does not appear in the Chinese zodiac?",
    choiceA: "Dragon",
    choiceB: "Rabbit",
    choiceC: "Bear",
    choiceD: "Dog",
    correct: "C"
  },
  {
    question: "How many holes are on a standard bowling ball?",
    choiceA: "3",
    choiceB: "5",
    choiceC: "2",
    choiceD: "10",
    correct: "A"
  },
  {
    question: "What is the name of this symbol: Â¶",
    choiceA: "Fermata",
    choiceB: "Pilcrow",
    choiceC: "Interrobang",
    choiceD: "Biltong",
    correct: "B"
  },
  {
    question: "What is the hottest planet?",
    choiceA: "Venus",
    choiceB: "Mercury",
    choiceC: "Saturn",
    choiceD: "Sun",
    correct: "A"
  },
  {
    question: "What is the Kudzu?",
    choiceA: "Antelope",
    choiceB: "Bird",
    choiceC: "Jewish settlement",
    choiceD: "Climbing plant",
    correct: "A"
  },
  {
    question: "Who was the last wife of Henry VIII?",
    choiceA: "Anne of Cleves",
    choiceB: "Catherine of Aragon",
    choiceC: "Catherine Howard",
    choiceD: "Catherine Parr",
    correct: "D"
  },
  {
    question: "What color is gin?",
    choiceA: "Colourless",
    choiceB: "Blue",
    choiceC: "Green",
    choiceD: "Yellow",
    correct: "A"
  },
  {
    question: "What is minestrone?",
    choiceA: "Cheese",
    choiceB: "Mineral",
    choiceC: "Soup",
    choiceD: "Brick",
    correct: "C"
  },
  {
    question: "Which star sign is the first sign of the zodiac?",
    choiceA: "Pisces",
    choiceB: "Capricorn",
    choiceC: "Taurus",
    choiceD: "Aries",
    correct: "D"
  },
  {
    question: "What is the loudest animal on Earth?",
    choiceA: "African Elephant",
    choiceB: "Sperm Whale",
    choiceC: "Blue Whale",
    choiceD: "Indian Elephant",
    correct: "C"
  },
  {
    question: "What is the capital of Canada?",
    choiceA: "Montreal",
    choiceB: "Ottawa",
    choiceC: "Toronto",
    choiceD: "Vancouver",
    correct: "B"
  },
  {
    question: "What does the roman numeral X represent?",
    choiceA: "10",
    choiceB: "5",
    choiceC: "50",
    choiceD: "100",
    correct: "A"
  },
  {
    question: "The brain of a computer is?",
    choiceA: "CPU",
    choiceB: "GPU",
    choiceC: "Memory",
    choiceD: "ALU",
    correct: "A"
  },
  {
    question: "Entomology is the science that studies ____",
    choiceA: "Behavior of human beings",
    choiceB: "Insects",
    choiceC: "The origin of scientific terms",
    choiceD: "Human Body",
    correct: "B"
  },
  {
    question: "When did WW2 start?",
    choiceA: "1938",
    choiceB: "1945",
    choiceC: "1940",
    choiceD: "1939",
    correct: "D"
  },
  {
    question: "Which of the following is a symbol for peace?",
    choiceA: "Olive branch",
    choiceB: "Heart",
    choiceC: "Jade",
    choiceD: "Eye",
    correct: "A"
  },
  {
    question: "Which is the tallest waterfall in the world?",
    choiceA: "Niagara Falls",
    choiceB: "Angel Falls",
    choiceC: "Yosemite Falls",
    choiceD: "Iguazu Falls",
    correct: "B"
  },
  {
    question: "How are bats able to fly in the dark?",
    choiceA: "X-ray Vision",
    choiceB: "Sixth Sense",
    choiceC: "Echolocation",
    choiceD: "Inter-species communication",
    correct: "C"
  }
];

const playerInfo = [];
var questions;

const start = document.getElementById("start");
const trivia = document.getElementById("trivia");
const question = document.getElementById("question");
const counter = document.getElementById("counter");
const timeGauge = document.getElementById("timeGauge");
const choiceA = document.getElementById("A");
const choiceB = document.getElementById("B");
const choiceC = document.getElementById("C");
const choiceD = document.getElementById("D");
const scoreContainer = document.getElementById("scoreContainer");
const finish = document.getElementById("finish");
const progress = document.getElementById("progress");
const gameContainer = document.getElementById("gameContainer");
const sportsQ = document.getElementById("sportsQ");
const videogamesQ = document.getElementById("videogamesQ");
const generalQ = document.getElementById("generalQ");
const startBtn = document.getElementById("startBtn");

let lastQuestionIndex;
let runningQuestionIndex = 0;

const qTime = 10;
const gaugeWidth = 300;
var count = 0;
var count1 = 0;
const gaugeProgressBar = gaugeWidth / qTime;
let TIMER;

let score = 0;
let startButtonDisabled = true;
let isPaused = false;
const countQuestion = 20;
const curQuestion = runningQuestionIndex + 1;

const choices = {
  A: choiceA,
  B: choiceB,
  C: choiceC,
  D: choiceD
};

function startGame() {
  runningQuestionIndex = 0;
  score = 0;
  count = 0;
  count1 = 0;
  resetAllAnswers();
  shuffleQuestions(questions);
  displayQuestion();
  finish.style.display = "none";
  start.style.display = "none";
  trivia.style.display = "flex";
  progress.style.display = "block";
  counterRender();
  TIMER = setInterval(counterRender, 100);
  //Once game is started -> start display = hidden
  //start timer
  //display progress bar
  //display question and choices
}

function startAgain() {
  console.log("startAgain");
  finish.style.display = "none";
  start.style.display = "flex";
  trivia.style.display = "none";
  progress.style.display = "none";
  disactivateAllCatButtons();
  disableStartButton(true);
}

function setQuestions(val) {
  switch (val) {
    case "1":
      questions = sportsQuestions;
      break;
    case "2":
      questions = videogameQuestions;
      break;
    case "3":
      questions = generalQuestions;
      break;
    default:
      questions = null;
  }
  disableStartButton(false);
  activateCatButton(val);
  lastQuestionIndex = questions ? questions.length - 1 : null;
}

function disableStartButton(disabled) {
  startButtonDisabled = !disabled;
  if (disabled) {
    startBtn.classList.add("disabled");
  } else {
    startBtn.classList.remove("disabled");
  }
}

/**
 * On category screen, unselect all category buttons
 */
function disactivateAllCatButtons() {
  sportsQ.classList.remove("active");
  videogamesQ.classList.remove("active");
  generalQ.classList.remove("active");
}

/**
 * On category screen, mark one category button as selected
 */
function activateCatButton(val) {
  disactivateAllCatButtons();
  if (val == "1") {
    sportsQ.classList.add("active");
  }
  if (val == "2") {
    videogamesQ.classList.add("active");
  }
  if (val == "3") {
    generalQ.classList.add("active");
  }
}

function counterRender() {
  if (count <= qTime) {
    counter.innerHTML = Math.ceil((10 * qTime - count1) / 10);
    var temp = gaugeProgressBar * count;
    timeGauge.style.width = temp + "px";
    count = count + 0.1;
    count1++;
    //Every second the green gauge bar increases by 1/10 of gaugeWidth
    //Counter + 1 every second
  } else {
    count = 0;
    count1 = 0;
    answerIsWrong(runningQuestionIndex);
    if (isGameOver()) {
      clearInterval(TIMER);
      gameContainer.display = "";
      displayScore();
    } else {
      runningQuestionIndex++;
      displayQuestion();
    }
    //If timer runes out set count back to 0
    //Because time ran out answer will be wrong
    //progress bar is updated to turn red
    //If game is over clear and display score
    //if game is not over, the current quesion index + 1 to display next question and choices in the array
  }
}

function isGameOver() {
  if (runningQuestionIndex < lastQuestionIndex) {
    return false;
  } else {
    runningQuestionIndex++;
    return true;
  }
  //If the current question index is <= to the questions array length
  //return true or else return false
}

function displayQuestion() {
  var q = questions[runningQuestionIndex];
  question.innerHTML = q.question;
  choiceA.innerHTML = q.choiceA;
  choiceB.innerHTML = q.choiceB;
  choiceC.innerHTML = q.choiceC;
  choiceD.innerHTML = q.choiceD;
  //current question = the index of the questions array
  //set question and choices in HTML and displau them
}

function showNoChoice(element) {
  element.classList.remove("correct");
  element.classList.remove("wrong");
}

function showWrongChoice(element) {
  element.classList.remove("correct");
  element.classList.add("wrong");
}

function showCorrectChoice(element) {
  element.classList.remove("wrong");
  element.classList.add("correct");
}

function shuffleQuestions(questionArr) {
  let newPosition;
  let cur;
  for (var i = questionArr.length - 1; i > 0; i--) {
    newPosition = Math.floor(Math.random() * (i + 1));
    cur = questionArr[i];
    questionArr[i] = questionArr[newPosition];
    questionArr[newPosition] = cur;
  }
  return questions;
  //var newPosition and var current pos
  //for loop
  //the question array length and -1 every time
  //shuffles the questions index in the array
}

function isAnswerCorrect(answer) {
  if (!isPaused) {
    isPaused = true;
    if (questions[runningQuestionIndex].correct == answer) {
      if (runningQuestionIndex < 20) {
        score++;
        answerIsCorrect(runningQuestionIndex);
        showCorrectChoice(choices[answer]);
      }
    } else {
      answerIsWrong(runningQuestionIndex);
      showWrongChoice(choices[answer]);
    }
    setTimeout(function() {
      Object.values(choices).forEach(choice => showNoChoice(choice));
      if (isGameOver()) {
        clearInterval(TIMER);
        displayScore();
      } else {
        count = 0;
        count1 = 0;
        runningQuestionIndex++;
        displayQuestion();
      }
      isPaused = false;
    }, 300);
  }
  //if and else statement
  //if the choice == the questions array correct choice
  //score++ and update progress bar to green
  //else score remains unchanged and update progress bar to red
  //second if else statement
  //checks to see if game is over
  //if game is over clear time and display score
  //else set count to 0, cur question index++ and display next question
}

function answerIsCorrect(index) {
  document.getElementById("q" + index).style.backgroundColor = "#4CAF50";
  //changes the progress bar of the current question index to green
}

function answerIsWrong(index) {
  document.getElementById("q" + index).style.backgroundColor = "#777";
  //changes the progress bar of the current question index to red
}

function resetAnswer(index) {
  document.getElementById("q" + index).style.backgroundColor = "transparent";
  //changes the progress bar of the current question index to default
}

function resetAllAnswers() {
  questions.forEach((q, i) => resetAnswer(i));
}

function displayScore() {
  finish.style.display = "block";
  start.style.display = "none";
  trivia.style.display = "none";
  progress.style.display = "block";

  var scorePercent = Math.round((100 * score) / questions.length);
  scoreContainer.innerHTML = scorePercent + "%";
  //Show score percent Math.round to get a whole number
  //Send var scorePercent to html to display
}
